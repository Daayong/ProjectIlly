<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.c.illy.notice.NoticeRepository">

<!--공지사항 리스트 상단 불러오기-->
<select id="getSelectListTop" resultType="NoticeVO" >
	SELECT * FROM notice 
	WHERE notice_top=1 
</select>

<!--공지사항 리스트 불러오기-->
<select id="getSelectList" parameterType="Pager" resultType="NoticeVO" >
	SELECT * FROM notice 
	WHERE 
		<choose>
			<when test="kind=='notice_title'">notice_title</when>
			<otherwise>notice_contents</otherwise>
		</choose>
	LIKE CONCAT('%',#{search},'%')
	ORDER BY notice_id DESC limit #{startRow},#{perPage}
</select>

<!-- totalCount 불러오기  -->
<select id="getTotalCount" parameterType="Pager" resultType="Long">
	SELECT COUNT(notice_id) FROM notice
	WHERE 
		<choose>
			<when test="kind=='notice_title'">notice_title</when>
			<otherwise>notice_contents</otherwise>
		</choose>
	LIKE CONCAT('%',#{search},'%')
</select>












</mapper>